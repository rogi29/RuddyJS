<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>globals/document.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-$arr.html">$arr</a><ul class='methods'><li data-type='method'><a href="module-$arr.html#~concat">concat</a></li><li data-type='method'><a href="module-$arr.html#~first">first</a></li><li data-type='method'><a href="module-$arr.html#~forEach">forEach</a></li><li data-type='method'><a href="module-$arr.html#~indexOf">indexOf</a></li><li data-type='method'><a href="module-$arr.html#~isEmpty">isEmpty</a></li><li data-type='method'><a href="module-$arr.html#~join">join</a></li><li data-type='method'><a href="module-$arr.html#~last">last</a></li><li data-type='method'><a href="module-$arr.html#~map">map</a></li><li data-type='method'><a href="module-$arr.html#~pop">pop</a></li><li data-type='method'><a href="module-$arr.html#~push">push</a></li><li data-type='method'><a href="module-$arr.html#~reduce">reduce</a></li><li data-type='method'><a href="module-$arr.html#~reverse">reverse</a></li></ul></li><li><a href="module-$css.html">$css</a><ul class='methods'><li data-type='method'><a href="module-$css.html#~deleteRule">deleteRule</a></li><li data-type='method'><a href="module-$css.html#~getCSSText">getCSSText</a></li><li data-type='method'><a href="module-$css.html#~getRule">getRule</a></li><li data-type='method'><a href="module-$css.html#~insertRule">insertRule</a></li><li data-type='method'><a href="module-$css.html#~jsonToRule">jsonToRule</a></li><li data-type='method'><a href="module-$css.html#~objToRule">objToRule</a></li><li data-type='method'><a href="module-$css.html#~ruleToJson">ruleToJson</a></li><li data-type='method'><a href="module-$css.html#~ruleToObj">ruleToObj</a></li></ul></li><li><a href="module-$doc.html">$doc</a><ul class='methods'><li data-type='method'><a href="module-$doc.html#~addEventListener">addEventListener</a></li><li data-type='method'><a href="module-$doc.html#~createStyle">createStyle</a></li><li data-type='method'><a href="module-$doc.html#~customEvent">customEvent</a></li><li data-type='method'><a href="module-$doc.html#~dispatchEvent">dispatchEvent</a></li><li data-type='method'><a href="module-$doc.html#~getComputedStyle">getComputedStyle</a></li><li data-type='method'><a href="module-$doc.html#~getStyle">getStyle</a></li><li data-type='method'><a href="module-$doc.html#~mousePosition">mousePosition</a></li><li data-type='method'><a href="module-$doc.html#~querySelector">querySelector</a></li><li data-type='method'><a href="module-$doc.html#~querySelectorAll">querySelectorAll</a></li><li data-type='method'><a href="module-$doc.html#~size">size</a></li><li data-type='method'><a href="module-$doc.html#~viewport">viewport</a></li></ul></li><li><a href="module-$el.html">$el</a><ul class='methods'><li data-type='method'><a href="module-$el.html#~addEventListener">addEventListener</a></li><li data-type='method'><a href="module-$el.html#~dispatchEvent">dispatchEvent</a></li><li data-type='method'><a href="module-$el.html#~getAttribute">getAttribute</a></li><li data-type='method'><a href="module-$el.html#~querySelector">querySelector</a></li><li data-type='method'><a href="module-$el.html#~querySelectorAll">querySelectorAll</a></li><li data-type='method'><a href="module-$el.html#~setAttribute">setAttribute</a></li></ul></li><li><a href="module-$Export.html">$Export</a><ul class='methods'><li data-type='method'><a href="module-$Export.html#~module">module</a></li></ul></li><li><a href="module-$Export_module.html">$Export/module</a><ul class='methods'><li data-type='method'><a href="module-$Export_module.html#~include">include</a></li><li data-type='method'><a href="module-$Export_module.html#~init">init</a></li></ul></li><li><a href="module-$Export_module_include.html">$Export/module/include</a><ul class='methods'><li data-type='method'><a href="module-$Export_module_include.html#~init">init</a></li></ul></li><li><a href="module-$float.html">$float</a></li><li><a href="module-$func.html">$func</a><ul class='methods'><li data-type='method'><a href="module-$func.html#~assign">assign</a></li><li data-type='method'><a href="module-$func.html#~bind">bind</a></li></ul></li><li><a href="module-$int.html">$int</a></li><li><a href="module-$nodes.html">$nodes</a><ul class='methods'><li data-type='method'><a href="module-$nodes.html#~concat">concat</a></li><li data-type='method'><a href="module-$nodes.html#~first">first</a></li><li data-type='method'><a href="module-$nodes.html#~forEach">forEach</a></li><li data-type='method'><a href="module-$nodes.html#~indexOf">indexOf</a></li><li data-type='method'><a href="module-$nodes.html#~isOne">isOne</a></li><li data-type='method'><a href="module-$nodes.html#~last">last</a></li><li data-type='method'><a href="module-$nodes.html#~map">map</a></li><li data-type='method'><a href="module-$nodes.html#~push">push</a></li></ul></li><li><a href="module-$num.html">$num</a><ul class='methods'><li data-type='method'><a href="module-$num.html#~isFloat">isFloat</a></li><li data-type='method'><a href="module-$num.html#~isInteger">isInteger</a></li></ul></li><li><a href="module-$obj.html">$obj</a><ul class='methods'><li data-type='method'><a href="module-$obj.html#~assign">assign</a></li><li data-type='method'><a href="module-$obj.html#~extend">extend</a></li><li data-type='method'><a href="module-$obj.html#~forEach">forEach</a></li><li data-type='method'><a href="module-$obj.html#~keys">keys</a></li><li data-type='method'><a href="module-$obj.html#~map">map</a></li><li data-type='method'><a href="module-$obj.html#~push">push</a></li><li data-type='method'><a href="module-$obj.html#~values">values</a></li></ul></li><li><a href="module-$r.html">$r</a><ul class='methods'><li data-type='method'><a href="module-$r.html#.attribute">attribute</a></li><li data-type='method'><a href="module-$r.html#.catch">catch</a></li><li data-type='method'><a href="module-$r.html#.createRule">createRule</a></li><li data-type='method'><a href="module-$r.html#.css">css</a></li><li data-type='method'><a href="module-$r.html#.do">do</a></li><li data-type='method'><a href="module-$r.html#.each">each</a></li><li data-type='method'><a href="module-$r.html#.find">find</a></li><li data-type='method'><a href="module-$r.html#.getTranslate">getTranslate</a></li><li data-type='method'><a href="module-$r.html#.html">html</a></li><li data-type='method'><a href="module-$r.html#.on">on</a></li><li data-type='method'><a href="module-$r.html#.or">or</a></li><li data-type='method'><a href="module-$r.html#.position">position</a></li><li data-type='method'><a href="module-$r.html#.setTranslate">setTranslate</a></li><li data-type='method'><a href="module-$r.html#.setTranslateX">setTranslateX</a></li><li data-type='method'><a href="module-$r.html#.setTranslateY">setTranslateY</a></li><li data-type='method'><a href="module-$r.html#.size">size</a></li><li data-type='method'><a href="module-$r.html#.style">style</a></li><li data-type='method'><a href="module-$r.html#.value">value</a></li><li data-type='method'><a href="module-$r.html#.when">when</a></li><li data-type='method'><a href="module-$r.html#.when">when</a></li><li data-type='method'><a href="module-$r.html#.when">when</a></li></ul></li><li><a href="module-$str.html">$str</a><ul class='methods'><li data-type='method'><a href="module-$str.html#~escapeHTML">escapeHTML</a></li><li data-type='method'><a href="module-$str.html#~isEmpty">isEmpty</a></li><li data-type='method'><a href="module-$str.html#~pregMatch">pregMatch</a></li><li data-type='method'><a href="module-$str.html#~toHTML">toHTML</a></li><li data-type='method'><a href="module-$str.html#~toLowerCase">toLowerCase</a></li><li data-type='method'><a href="module-$str.html#~toUpperCase">toUpperCase</a></li><li data-type='method'><a href="module-$str.html#~ucfirst">ucfirst</a></li></ul></li><li><a href="module-CSSStyleSheet.html">CSSStyleSheet</a></li><li><a href="module-Globals.html">Globals</a></li><li><a href="module-Ruddy.html">Ruddy</a><ul class='methods'><li data-type='method'><a href="module-Ruddy.html#~assign">assign</a></li><li data-type='method'><a href="module-Ruddy.html#~export">export</a></li><li data-type='method'><a href="module-Ruddy.html#~isArr">isArr</a></li><li data-type='method'><a href="module-Ruddy.html#~isBool">isBool</a></li><li data-type='method'><a href="module-Ruddy.html#~isDate">isDate</a></li><li data-type='method'><a href="module-Ruddy.html#~isDoc">isDoc</a></li><li data-type='method'><a href="module-Ruddy.html#~isEl">isEl</a></li><li data-type='method'><a href="module-Ruddy.html#~isEvent">isEvent</a></li><li data-type='method'><a href="module-Ruddy.html#~isFloat">isFloat</a></li><li data-type='method'><a href="module-Ruddy.html#~isFunc">isFunc</a></li><li data-type='method'><a href="module-Ruddy.html#~isInt">isInt</a></li><li data-type='method'><a href="module-Ruddy.html#~isNodes">isNodes</a></li><li data-type='method'><a href="module-Ruddy.html#~isNum">isNum</a></li><li data-type='method'><a href="module-Ruddy.html#~isObj">isObj</a></li><li data-type='method'><a href="module-Ruddy.html#~isStr">isStr</a></li></ul></li><li><a href="module-Ruddy_cache.html">Ruddy/cache</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">globals/document.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * RuddyJS Globals - Document
 *
 * @package     ruddy
 * @module      $doc
 * @author      Gil Nimer &lt;info@ruddymonkey.com>
 * @author      Nick Vlug &lt;info@ruddy.nl>
 * @copyright   RuddyJS licensed under MIT. Copyright (c) 2017 Ruddy Monkey &amp; ruddy.nl
 *
 * @param       {Document} doc An HTML `Document` is required
 * @returns     {Document}
 *
 * @description
 * RuddyJS Globals - Document
 * &lt;div style="margin-top:-10px;color:#ff833a;">*`window` and `document` variables are required!&lt;/div>
 *
 * @example
 * //Right
 * $doc(document).mousePosition();
 *
 * //Wrong
 * $doc(document.body).mousePosition(); =>
 * TypeError("Document type - argument provided is not a document variable");
 */

var $Export = $Export || require('../core/export');

$Export
    .module(
        '$doc',
        '@document',
        '../globals/document'
    )
    .include([
        '@core',
        'window',
        'document',
        'Element'
    ])
    .init(
        this,
        module,
        function (__core, window, document, Element) {
            "use strict";

            /**
             * Global document wrapper
             *
             * @name $doc
             * @memberof module:Globals
             * @description Global document wrapper
             * @param {HTMLDocument} doc
             *
             * @returns {HTMLDocument}
             */
            var docum = function(doc) {
                if(__core.isDoc(doc) === false)
                    throw new TypeError("Document type - argument provided is not a document variable");

                /**
                 *
                 * @type {{querySelectorAll: (*|exports|module.exports|module:$el.querySelectorAll|Function), querySelector: (*|exports|module.exports|module:$el.querySelector|Function), createStyle: (exports|module.exports|module:$doc.createStyle), getStyle: (exports|module.exports|module:$doc.getStyle), addEventListener: (*|exports|module.exports|module:$el.addEventListener|Function), dispatchEvent: Function, customEvent: (exports|module.exports|module:$doc.customEvent), mousePosition: (exports|module.exports|module:$doc.mousePosition), size: (exports|module.exports|module:$doc.size), viewport: (exports|module.exports|module:$doc.viewport), getComputedStyle: (exports|module.exports|module:$doc.getComputedStyle)}}
                 */
                var prototype = {
                    /**
                     * Native QuerySelectorAll function polyfill
                     *
                     * @function
                     * @inner
                     * @memberof module:$doc
                     * @description Native querySelectorAll function polyfill
                     * @param selector
                     *
                     * @param r
                     * @param c
                     * @param i
                     * @param j
                     * @param a
                     *
                     * @returns {Array}
                     */
                    querySelectorAll: (document.querySelectorAll || function (r, c, i, j, a) {
                        var d=document,
                            s=d.createStyleSheet();
                        a = d.all;
                        c = [];
                        r = r.replace(/\[for\b/gi, '[htmlFor').split(',');
                        for (i = r.length; i--;) {
                            s.addRule(r[i], 'visiblility:visible', 0);
                            for (j = a.length; j--;) {
                                a[j].currentStyle.visiblility &amp;&amp; c.push(a[j]);
                            }
                            s.removeRule(0);
                        }
                        return c;
                    }),

                    /**
                     * Native QuerySelector function polyfill
                     *
                     * @function
                     * @inner
                     * @memberof module:$doc
                     * @description Native querySelector function polyfill
                     * @param selectors
                     *
                     * @returns {element|null}
                     */
                    querySelector: (document.querySelector || function(selectors) {
                        var elements = prototype.querySelectorAll.call(document, selectors);
                        return (elements.length) ? elements[0] : null;
                    }),

                    /**
                     * Creates style element
                     *
                     * @function
                     * @inner
                     * @memberof module:$doc
                     * @description Creates style element
                     * @param title
                     *
                     * @returns {*}
                     */
                    createStyle: function(title) {
                        var style = document.createElement('style'), element;
                        style.title = title;
                        element = document.getElementsByTagName('head')[0].appendChild(style);
                        return element.sheet;
                    },

                    /**
                     * Get style element
                     *
                     * @function
                     * @inner
                     * @memberof module:$doc
                     * @description Get style element
                     * @param title
                     *
                     * @returns {*}
                     */
                    getStyle: function(title) {
                        var sheets = document.styleSheets, len = sheets.length, i;
                        for(i = len; i--;) {
                            if(sheets[i].title == title){
                                return sheets[i];
                            }
                        }
                        return false;
                    },

                    /**
                     * Native addEventListener function polyfill
                     *
                     * @function
                     * @inner
                     * @memberof module:$doc
                     * @description Native addEventListener function polyfill
                     *
                     * @param eventNameWithoutOn
                     * @param callback
                     *
                     * @returns {*}
                     */
                    addEventListener: document.addEventListener || function(eventNameWithoutOn, callback) {
                        return doc.attachEvent('on' + eventNameWithoutOn, callback);
                    },

                    /**
                     * Native dispatchEvent function polyfill
                     *
                     * @function
                     * @inner
                     * @memberof module:$doc
                     * @description Native dispatchEvent function polyfill
                     * @param eventObject
                     *
                     * @returns {*}
                     */
                    dispatchEvent: ('Element' in window) ? Element.prototype.dispatchEvent : function (eventObject) {
                        return doc.fireEvent("on" + eventObject.type, eventObject);
                    },

                    /**
                     * Creates custom event
                     *
                     * @function
                     * @inner
                     * @memberof module:$doc
                     * @description Creates custom event
                     *
                     * @param event
                     * @param params
                     *
                     * @returns {CustomEvent}
                     */
                    customEvent: function(event, params) {
                        if(typeof window.CustomEvent === 'function')
                            return new CustomEvent(event, params);

                        function CustomEvent ( event, params ) {
                            params = params || { bubbles: false, cancelable: false, detail: undefined };
                            var e = document.createEvent( 'CustomEvent' );
                            e.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );
                            return e;
                        }

                        window.CustomEvent = CustomEvent;
                        return new CustomEvent(event, params );
                    },

                    /**
                     * Get mouse position
                     *
                     * @function
                     * @inner
                     * @memberof module:$doc
                     * @description Get mouse position
                     * @param e
                     * @param property
                     *
                     * @returns {{x: Number, y: Number}|Number}
                     */
                    mousePosition: function(e, property) {
                        var x   =  e.pageX || (e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft) || ((e.changedTouches) ? e.changedTouches[0].pageX : 0),
                            y   =  e.pageY || (e.clientY + document.body.scrollTop + document.documentElement.scrollTop) || ((e.changedTouches) ? e.changedTouches[0].pageY : 0),
                            obj = {x: Math.round(x), y: Math.round(y)};

                        return (property &amp;&amp; obj[property]) ? obj[property] : obj;
                    },

                    /**
                     * Get Document Size
                     *
                     * @function
                     * @inner
                     * @memberof module:$doc
                     * @description Get Document Size
                     * @param property
                     *
                     * @returns {{width: Number, height: Number}|Number}
                     */
                    size: function(property) {
                        var
                            w = Math.max(
                                document.documentElement["clientWidth"],
                                document.body["scrollWidth"],
                                document.documentElement["scrollWidth"],
                                document.body["offsetWidth"],
                                document.documentElement["offsetWidth"]
                            ) || 0,
                            h = Math.max(
                                document.documentElement["clientHeight"],
                                document.body["scrollHeight"],
                                document.documentElement["scrollHeight"],
                                document.body["offsetHeight"],
                                document.documentElement["offsetHeight"]
                            ) || 0,
                            obj = {width: w, height: h};

                        return (property &amp;&amp; obj[property]) ? obj[property] : obj;
                    },

                    /**
                     * Get Viewport Size
                     *
                     * @function
                     * @inner
                     * @memberof module:$doc
                     * @description Get Viewport Size
                     * @param property
                     *
                     * @returns {{width: Number, height: Number}|Number}
                     */
                    viewport: function(property) {
                        var w   = window.innerWidth || ((document.documentElement) ? document.documentElement.clientWidth : document.body.clientWidth) || 0,
                            h   = window.innerHeight || ((document.documentElement) ? document.documentElement.clientHeight : document.body.clientHeight) || 0,
                            obj = {width: w, height: h};

                        return (property &amp;&amp; obj[property]) ? obj[property] : obj;
                    },

                    /**
                     * getComputedStyle Polyfill
                     * https://github.com/jonathantneal/Polyfills-for-IE8/
                     *
                     * @function
                     * @inner
                     * @memberof module:$doc
                     *
                     * @returns {getComputedStyle}
                     */
                    getComputedStyle: function () {
                        if('getComputedStyle' in window)
                            return window.getComputedStyle.apply(window, arguments);

                        function getPixelSize(element, style, property, fontSize) {
                            var
                                sizeWithSuffix = style[property],
                                size = parseFloat(sizeWithSuffix),
                                suffix = sizeWithSuffix.split(/\d/)[0],
                                rootSize;

                            fontSize = fontSize != null ? fontSize : /%|em/.test(suffix) &amp;&amp; element.parentElement ? getPixelSize(element.parentElement, element.parentElement.currentStyle, 'fontSize', null) : 16;
                            rootSize = property == 'fontSize' ? fontSize : /width/i.test(property) ? element.clientWidth : element.clientHeight;

                            return (suffix == 'em') ? size * fontSize : (suffix == 'in') ? size * 96 : (suffix == 'pt') ? size * 96 / 72 : (suffix == '%') ? size / 100 * rootSize : size;
                        }

                        function setShortStyleProperty(style, property) {
                            var
                                borderSuffix = property == 'border' ? 'Width' : '',
                                t = property + 'Top' + borderSuffix,
                                r = property + 'Right' + borderSuffix,
                                b = property + 'Bottom' + borderSuffix,
                                l = property + 'Left' + borderSuffix;

                            style[property] = (style[t] == style[r] == style[b] == style[l] ? [style[t]]
                                : style[t] == style[b] &amp;&amp; style[l] == style[r] ? [style[t], style[r]]
                                : style[l] == style[r] ? [style[t], style[r], style[b]]
                                : [style[t], style[r], style[b], style[l]]).join(' ');
                        }

                        function CSSStyleDeclaration(element) {
                            var
                                currentStyle = element.currentStyle,
                                style = this,
                                fontSize = getPixelSize(element, currentStyle, 'fontSize', null);

                            for (var property in currentStyle) {
                                if (/width|height|margin.|padding.|border.+W/.test(property) &amp;&amp; style[property] !== 'auto') {
                                    style[property] = getPixelSize(element, currentStyle, property, fontSize) + 'px';
                                } else if (property === 'styleFloat') {
                                    style['float'] = currentStyle[property];
                                } else {
                                    style[property] = currentStyle[property];
                                }
                            }

                            setShortStyleProperty(style, 'margin');
                            setShortStyleProperty(style, 'padding');
                            setShortStyleProperty(style, 'border');

                            style.fontSize = fontSize + 'px';

                            return style;
                        }

                        CSSStyleDeclaration.prototype = {
                            constructor: CSSStyleDeclaration,
                            getPropertyPriority: function () {},
                            getPropertyValue: function (prop) {return this[prop] || '';},
                            item: function () {},
                            removeProperty: function () {},
                            setProperty: function () {},
                            getPropertyCSSValue: function () {}
                        };

                        function getComputedStyle(element) {
                            return new CSSStyleDeclaration(element);
                        }

                        return getComputedStyle;
                    }
                };

                return __core.assign(doc, prototype);
            };

            /**
             *
             * @type {{createStyle, getStyle, customEvent, mousePosition}}
             */
            return docum;
        }
    );</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
